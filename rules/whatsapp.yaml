# NAME: Whatsapp
# AUTHOR: blackmatrix7
# REPO: https://github.com/blackmatrix7/ios_rule_script
# UPDATED: 2024-07-03 16:16:12
# DOMAIN: 1
# DOMAIN-KEYWORD: 1
# DOMAIN-SUFFIX: 4
# IP-CIDR: 11
# TOTAL: 17
payload:
# ============ Whatsapp ============

#1️⃣ Aturan untuk VoIP (Panggilan Suara WhatsApp) dan Video Call WhatsApp

#✅ Rentang IP untuk VoIP WhatsApp
  - IP-CIDR,157.240.0.0/16  # Server utama WhatsApp
  - IP-CIDR,31.13.24.0/21  # Server khusus VoIP WhatsApp
  - IP-CIDR,179.60.192.0/22  # Rentang VoIP global
  - IP-CIDR,185.60.216.0/22  # Rentang WhatsApp utama

#✅ Rentang IP untuk Video Call WhatsApp
  - IP-CIDR,190.93.240.0/20  # Server media (gambar/video)
  - IP-CIDR,204.15.20.0/22  # Rentang tambahan untuk media

#✅ Mode Routing untuk VoIP
  - IP-CIDR,157.240.0.0/16
  - IP-CIDR,31.13.24.0/21
  - IP-CIDR,179.60.192.0/22
  - IP-CIDR,185.60.216.0/22

#✅ Mode Routing untuk Video Call  
  - IP-CIDR,190.93.240.0/20
  - IP-CIDR,204.15.20.0/22

#2️⃣ Aturan PORT untuk Panggilan Suara WhatsApp dan Video Call WhatsApp

#✅ Mode Routing untuk VoIP
  - DST-PORT,3478-3497,udp
  - DST-PORT,4244,udp
  - DST-PORT,5222,tcp
  - DST-PORT,5223,tcp
  - DST-PORT,5228-5243,tcp
  - DST-PORT,5288,udp
  - DST-PORT,57923,udp

#✅ Port yang digunakan untuk Video Call WhatsApp
  - DST-PORT,40000-60000,udp  # Port dinamis untuk video call
  - DST-PORT,45395-45399,udp  # Media streaming panggilan video
  - DST-PORT,50318,udp  # Media tambahan
  - DST-PORT,59234,udp  # Media tambahan

#✅ Mode Routing untuk Video Call
  - DST-PORT,40000-60000,udp
  - DST-PORT,45395-45399,udp
  - DST-PORT,50318,udp
  - DST-PORT,59234,udp

#✅ Port yang digunakan untuk VoIP WhatsApp
  - DST-PORT,3478-3497,udp  # STUN/TURN untuk NAT traversal (koneksi VoIP)
  - DST-PORT,4244,udp  # Signaling VoIP
  - DST-PORT,5222,tcp  # Signaling XMPP
  - DST-PORT,5223,tcp  # Secure XMPP
  - DST-PORT,5228-5243,tcp  # Notifikasi Push
  - DST-PORT,5288,udp  # Signaling tambahan
  - DST-PORT,57923,udp  # Media streaming panggilan
